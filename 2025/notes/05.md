# Day 5 - Cafeteria

> [<- Yesterday](04.md) | [Tomorrow ->](06.md)

A nice puzzle, feels very reminiscent of [2023 Day 5](https://github.com/R2bEEaton/Advent-of-Code/blob/main/2023/notes/5.md) or [2022 Day 4](https://github.com/R2bEEaton/Advent-of-Code/blob/main/2022/4.md), but this time with big numbers. I like my solution for Part Two, and I had it a lot quicker but made a typo.

|      | Part One | Part Two | Total |
|------|----------|----------|-------|
| Time | 3:05     | 17:49    | 20:54 |

## Part One
Simple as for each ingredient ID, check if it exists in any range by comparing it with the beginning and end of the range.

[Code](../code/05a.py)

```python
from helpers.datagetter import aocd_data_in

din, aocd_submit = aocd_data_in(split=True, numbers=True)

ans = 0

ranges = []
init = True

for line in din:
    if line == []:
        init = False
        continue
    if init:
        ranges.append(list(map(abs, line)))
    else:
        for r in ranges:
            if line[0] >= r[0] and line[0] <= r[1]:
                ans += 1
                break

aocd_submit(ans)
```

## Part Two
Again, I like this solution mostly because it uses sets, sorting to avoid many cases, and is super quick. It adds each range to a set, and continuously loops over all combinations of range pairs, sorts them ascending, and looks for overlaps. The only two types of possible overlaps are therefore:

- $ a_0 <= b_0 <= a_1 <= b_2 $, where `A` and `B` overlap and $ a_0, b_1 $ is a simplified range (remove `A`, and `B`, replace with simplified range).
- $ a_0 <= b_0 <= b_1 <= a_1 $, where `A` contains `B` and $ a_0, a_1 $ is a simplified range (remove `B`).

Had to break out Paint.NET for that one. Keep simplifying range pairs until no overlaps are detected, and then sum the length of each range. Pretty cool!

The **typo** I made was accidentally removing range `A` in the second case, when it should have been `B`. I was scratching my head for a while on that one... I feel like I had everything by the 12-13 minute mark but I can't be sure.

[Code](../code/05b.py)

```python
from helpers.datagetter import aocd_data_in
import itertools

din, aocd_submit = aocd_data_in(split=True, numbers=True)

ans = 0

ranges = set()

for line in din:
    if line == []:
        break
    ranges.add(tuple(map(abs, line)))

overlap = True
while overlap:
    overlap = False
    for pair in itertools.combinations(ranges, r=2):
        a, b = sorted(pair)
        # A and B overlap
        if b[0] <= a[1] and b[1] >= a[1]:
            ranges.remove(a)
            ranges.remove(b)
            ranges.add((a[0], b[1]))
            overlap = True
            break
        # B is contained in A
        if a[0] <= b[0] and a[1] >= b[1]:
            ranges.remove(b)
            overlap = True
            break

for r in ranges:
    ans += r[1] - r[0] + 1

aocd_submit(ans)
```